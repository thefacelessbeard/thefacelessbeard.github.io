<!DOCTYPE html>
<html>
    <head>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <meta content="utf-8" http-equiv="encoding">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js" type="text/javascript"></script>
        <link rel='stylesheet' href='stylesheets/day.css'>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script>
            <!-- console.log(moment().calendar()); -->
            <!-- console.log(moment(moment().format()).valueOf()); -->
            <!-- console.log(moment('24/12/2019 09:15:00', "DD/MM/YYYY hh:mm:ss", true).format()); -->
            <!-- var resp = fetch('weaves.md') -->
            <!--     .then(response => response.text()) -->
            <!--     .then(text => console.log(text.split('\n')[0].split(' '))) -->
            var file = 'http://localhost:7001/weaves.md'
            function readTextFile(file)
            {
                var rawFile = new XMLHttpRequest();
                rawFile.open("GET", file, false);
                rawFile.onreadystatechange = function () {
                    if(rawFile.readyState === 4) {
                        if(rawFile.status === 200 || rawFile.status == 0) {
                            var allText = rawFile.responseText;
                            var allTextLines = allText.split('\n')
                            for (const item of allTextLines) {
                                if (item) {
                                    var time = item.split(' ')[1]
                                    var date = item.split(' ')[2]
                                    var context = item.slice(item.indexOf(date) + date.length + 1)
                                    var mDate = moment(date + ' ' + time, "DD-MM-YY HH:mm").format()
                                    console.log(moment(mDate).calendar({
                                            sameElse: 'On DD MMM YYYY'
                                    }))
                                }
                            }
                        }
                    }
                }
                rawFile.send(null);
            }
            readTextFile(file)

        </script>
    </head>
    <body>
        <div id="main-container">
            <div id="header">
                <h1 id="page-name"> thefacelessbeard's web </h1>
            </div>
            <hr id="main-line">
            <div id="weaves">
                <h2 id="sub-name"> 
                    <span>w</span>
                    <span>e</span>
                    <span>a</span>
                    <span>v</span>
                    <span>e</span>
                    <span>s</span>
                </h2>
                <div class="item">
                    <div class="td">
                        Mon, 22 Feb, 2021
                        7:30 AM
                    </div>
                    <div class="text">
                        Streamed on <a href='twitch.tv/thefacelessbeard'> twitch.tv/thefacelessbeard </a>
                    </div>
                    <div class="past">
                        12 hours ago
                    </div>
                </div>
                <br>
                <div class="item">
                    <div class="td">
                        Sat, 20 Feb, 2021
                        11:30 PM
                    </div>
                    <div class="text">
                        Released video on <a href='https://www.youtube.com/channel/UC6FoYqo2W9tcgsLt_0OJl_g'> youtube </a>
                    </div>
                    <div class="past">
                        42 hours ago
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>

